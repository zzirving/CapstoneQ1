<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=bar-race-country&lang=js&code=MYewdgzgLgBArgBwCYEMoFMBiAndBHOdMYATxgF4YBGABjoG4AoUSWJASwFsiJ3wKYNJi2gxgadAHMQ2EgGEQAGxkQBAb0YwYAcgDKKMDAAi7KSG0AuHQGIArABYA7DWAA2bQBpNOuQAs4iigwAGrs0CiWNgCcVMDAjrae3toAohAsHEjmVtrWAGYowAActkVJWtpyKNiKEABGKEiRuejoru3uXhUA8sDoBrxI6M3WjgDMwDRD5TopijBVAFbgI2MNAEyO6zPaADJBALLoEBE5-cX2tttdOvpgGMNnUSiuNHX2OynE7GDsUCgQEb9RxxYA7AByaD4YBQ8zkfxIIzyeSieUceR2Cmw4Ea2RsSCo9heVB2AAUQAB3FCIs6udDORwfG7aULhJH2dA0MYY5m6JQGIIAIX6wF8I1iUWK12SRnQ8wO1RGKCuKHWEV5BhgCuwoEBZ2RrjGTm0jAAvkxmOBRKh_gIANqaO3aACa_Wwnhg6zoNA8nroVF9Xpo60DdDGoZo9gjtgjrgjjgjRQjUVDtFTAb9VBDmfDmajmZjmbjmYTmaTmZTfq9ofWGa962z9dz9fsAF0uk67sZTNIPT7qL6M7nC4Xi6XS-WqM3G-WxhnSr6ivmopWs6WqFtA45y_YihnHFPfdvy0VHI5247Kv5AiEwv8-4PH57Ay_n2_G77R77i2nqBms4OhZUEB5brDuxa2KO47rO2MCXmkGTsFkD6CL6_boWhT7_k-ub5vmhbjouRF_oGxZjNmlyfuWrgwR2lTVLUDRNJhA7vq-ua4b6-Gft-R7EeWq79r-h6eqWtgZq4E79iUsGXr0_SQEhwwsdhbFqRxvqcTA3EwCOvEwOuQlCRxhZOJ-_aGheMBOnMCwoMsYAoRhqEuc5bmaR5MDDsRq7_v-uZULO1H5gei60XB1l7Icxzqq5LHuXFiUJapdavtmparvmwGAbJkV3A8TnxUViUpU-H5qeVAXGYOlbrM2ti5TZ3y_P8gLFQlHXtV1rGlV5XF8dQQmuI12iQlA0KwgsCKFUl3XOeVC1pex_WetmYwcfmRojViOLIXN-2zSVOGeVpWWFmBgaVmMNAjeSVKIlhZVLRVr56bpPHvTAxbfQNhEwAJg43b6l6sveB2dUdrHlXhH0_YNg6lhdXlrQ1wN5fyMIwMKhRiuDeMub12ZvW9lak5pm2oxFTqyvKir4xDDNPX1zO5hOg7-YObZo52mrarqM2M5DMNfQNAHUEBP6TqBxb2BZ-aSUeMGMK2FqWqwMAkG6qiUDaKB2jdAB0ECKOwfQABRUAAlEwijoLA4TYFAACSYBDAAHgIQiMLb9v_I7rrVAImvVBAdoO87rvoG7KuMIweRwMQ438FA2ADHkMicEYaAoGbwfYC77uWzAGhaLgUBwNghi60bJvm1bBucCgCBm-IGDSLIFAAHzWa3ZiyHaecF1HMAANTULBvftyQ-utq21tmrHIAIEnhiUCXMCSNgSFWOvWhQEvVhpt4Wh1CAUD75wVjXTcWi23kUCH7YPrHzAW-SL4D__TQ3imjcbsAIJuzCDvF-jc3Y5F1gqN2MwtAoCARAfYdQ5QgK0KgmA6dsCN3PugbAVh46J2hDAM2YAi67zQa_O2FdDAKigL4A22IE5IGIUXMe2htBMHITAU0L9uFaF_t4XWEA7YoNQRAEAFc-hWBTmnDOWd_hm3DkPN2lsf43BIIA4BxcX5QBIAgdAORJ4yAei_H4AA3HBQipHYEIDfGAYDH62LgWERByCtGcIgL4SkVibEvy0One4uh2AAC99HUHsDwxxvwsHQiMBXKE4Ar50EiVweJYBYmpxXgAVWQBIRJ38-FeCEVvY4VgHRoLIaXfoihxrcD5I7bx6BbFaCKaYBB1JxFQEFCQAxSg4CcEck0mAOi9E5AaO6QZfx0CcF0Do22IjOGgGULg9BCdgAryIQgaoKBOCkN8eQsuVCxASCngoJZodNmp04AbUxsJCB2ioLPGAAAfJ5NgHDODcOwvZfC9n8M4UQUAQx5nkPATADg3BFLgEGVobp1BfmDMCEgxQwK0EeK8UM6xjTvkwAQLgYAYRoSH2hTikAvAV45Dfh_GB5CbmKEIP_KJqSGnEv8VATA2z2CKFhdoTg4BSWbL6CaThvDUEiqsgYFJK90lMtQt4CV0TwDSqyTkjAVhEA2iwLgAgAKSA3HlaklIAIfiSByCbMAboZj6pXoa3gYBJDZI1aan4Fqbibybr4U2wK5RTKIFACApS9kVNQcM0J2gMBuygNStBlLP5UFeMS0-58QCXy-s_ThzTZmhKDWg8Nn9w4B2wMSvx4BP7aFPooIY2Av4IA9rysA_LCjKWxX4zlyKdDYEkA0C2STBpGXQgbdYthLZCvTX89NQTD50F-S_VsP8zQWgAPQLrEFaJQ6ADbKEkGbJeK956cHkL4aoUAjZ226MvaE27z3gHnhgohPsYDsAEIoyObt6APpgAAHg1lrDdRBJC0LfSPEe7BdlaDNvgtZhCzYgbcaIu2AAVLg6AOngdWess2oHyHqokAW3OWs7TsFgiBjhorfTQZgAAWhgM-wuMAABU8AVWavwIQYgJB558MttB-e3C45ocIdhjAuG86-kHi-zD96xESPQAIaRkAMGZ2znh6oSiOMwB3dCE9xTQ6G11k-8ROp0AkY0-AA2bqEAeuAAbb1EK_UzyNpmg2uag5uhI_uvwR6T1QDPSvS9u6mCmiAA
	âš  Please be aware that this chart is not an official demo of Apache ECharts but is made by user-generated code.
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>
  
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.5.1/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-graph-modularity extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-graph-modularity@2/dist/echarts-graph-modularity.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.5.1/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    const updateFrequency = 1000;
const dimension = 0;
const categoryColors = {
  'San Diego': '#5470c6',
  'Chula Vista': '#91cc75',
  'Escondido': '#fac858',
  'Carlsbad': '#ee6666',
  'Oceanside': '#73c0de',
  'El Cajon': '#3ba272',
  'La Mesa': '#fc8452',
  'Santee': '#9a60b4',
  'Encinitas': '#ea7ccc',
  'National City': '#ff9f7f',
  'Coronado': '#d14a61',
  'Poway': '#6e7074',
  'Vista': '#f4e03f',
  'Solana Beach': '#1c9c82',
  'Del Mar': '#a52a2a',
  'San Marcos': '#ff6347'
};

const data = [
 ['Year', 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023, 2024],
 ['San Diego', 0, 1, 1, 3, 5, 5, 6, 7, 7, 8, 13, 22, 28, 31, 58, 84, 99, 127, 172, 278, 481, 713, 788, 877],
 ['Chula Vista', 0, 1, 1, 2, 2, 2, 2, 2, 2, 2, 5, 6, 6, 10, 11, 12, 15, 15, 18, 28, 46, 55, 67, 72], 
 ['Escondido', 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 3, 4, 4, 5, 7, 7, 8, 8, 11, 26, 32, 45, 58, 62],
 ['Carlsbad', 0, 1, 2, 2, 2, 3, 3, 4, 4, 5, 5, 6, 7, 8, 8, 9, 10, 10, 13, 27, 51, 67, 80, 85], 
 ['Oceanside', 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 4, 4, 5, 5, 5, 6, 7, 10, 10, 13, 35, 47, 50, 63],
 ['El Cajon', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 5, 8, 9, 11, 11, 13, 18, 38, 64, 71, 82], 
 ['La Mesa', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 2, 7, 9, 14, 15, 15], 
 ['Santee', 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 10, 13, 19, 23, 25], 
 ['Encinitas', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 3, 4, 7, 10, 16], 
 ['National City', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 22, 33, 34, 34], 
 ['Coronado', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 3, 3, 3, 4, 4, 15, 28, 29, 30], 
 ['Poway', 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 5, 5, 5, 5, 5, 6, 6, 6, 7, 7, 7, 8, 9, 10], 
 ['Vista', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 2, 4, 4, 5, 6, 6, 10, 17, 28, 32, 35], 
 ['Solana Beach', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 2, 5, 5, 5, 5, 9, 9, 9, 34, 35], 
 ['Del Mar', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 3, 3, 7, 8, 11, 13, 14], 
 ['San Marcos', 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 4, 6, 7, 12, 15, 16, 18, 18, 26, 40, 64, 67, 72]
];


const years = data[0].slice(1);
let startIndex = 0;
let startYear = years[startIndex];

function transformData(yearIndex) {
  return data.slice(1).map(category => [category[yearIndex + 1], category[0]]);
}

option = {
  grid: {
    top: 10,
    bottom: 30,
    left: 150,
    right: 80
  },
  xAxis: {
    max: 'dataMax',
    axisLabel: {
      formatter: function (n) {
        return Math.round(n) + '';
      }
    }
  },
  dataset: {
    source: transformData(startIndex)
  },
  yAxis: {
    type: 'category',
    inverse: true,
    max: 15,
    axisLabel: {
      show: true,
      fontSize: 14
    },
    animationDuration: 300,
    animationDurationUpdate: 300
  },
series: [
    {
      realtimeSort: true,
      seriesLayoutBy: 'column',
      type: 'bar',
      itemStyle: {
        color: function (param) {
          return categoryColors[param.value[1]] || '#5470c6';
        }
      },
      encode: {
        x: dimension,
        y: 1
      },
      label: {
        show: true,
        precision: 1,
        position: 'right',
        valueAnimation: true,
        fontFamily: 'monospace'
      }
    }
  ],
 animationDuration: 0,
  animationDurationUpdate: updateFrequency,
  animationEasing: 'linear',
  animationEasingUpdate: 'linear',
  graphic: {
    elements: [
      {
        type: 'text',
        right: 160,
        bottom: 60,
        style: {
          text: startYear,
          font: 'bolder 80px monospace',
          fill: 'rgba(100, 100, 100, 0.25)'
        },
        z: 100
      }
    ]
  }
};

// console.log(option);
myChart.setOption(option);
for (let i = startIndex; i < years.length; ++i) {
  (function (i) {
    setTimeout(function () {
      updateYear(years[i], i);
    }, (i - startIndex) * updateFrequency);
  })(i);
}

function updateYear(year, yearIndex) {
  let source = transformData(yearIndex);
  option.series[0].data = source;
  option.graphic.elements[0].style.text = year;
  myChart.setOption(option);
}


    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>